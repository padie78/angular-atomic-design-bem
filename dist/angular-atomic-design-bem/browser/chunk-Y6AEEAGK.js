import{b as L,d as B,e as k,f as U,g as w,h as F,i as j}from"./chunk-57TYY7GN.js";import{c as N,d as O}from"./chunk-PAIEFO4T.js";import{$ as h,Da as c,E as p,Ea as d,W as m,Wa as f,X as o,bb as E,db as u,ea as T,eb as y,fb as g,ha as i,i as v,ia as a,ja as _,na as l,ra as I,va as A,wa as D,za as s}from"./chunk-UVVLSM63.js";import{d as M}from"./chunk-QEZ3K4DX.js";var P=class r extends w{constructor(e,t,n){super();this.api=e;this.modalService=t;this.translateService=n;this.payments=this.api.payments}payments;columns=[{key:"id",label:"TABLE-COLUMNS.ID"},{key:"date",label:"TABLE-COLUMNS.DATE",type:"date"},{key:"amount",label:"TABLE-COLUMNS.AMOUNT",type:"currency"},{key:"status",label:"TABLE-COLUMNS.STATUS"},{key:"method",label:"TABLE-COLUMNS.METHOD"}];openDeleteModal(e){let t=this.modalService.open(B);t.componentInstance.title=this.translateService.instant("MODAL.TITLE"),t.componentInstance.message=this.translateService.instant("MODAL.MESSAGE",{id:e.id}),t.result.then(n=>{n&&this.api.deletePayment(e.id)})}openPaymentModal(){let e=this.modalService.open(k);e.componentInstance.title="New Payment",e.componentInstance.type="payment",e.componentInstance.onSubmit=t=>M(this,null,function*(){return yield v(this.api.createPayment(t))}),e.result.then(t=>{t&&this.api.fetchPayments()}).catch(()=>{})}getItems(){return this.payments()}static \u0275fac=function(t){return new(t||r)(o(O),o(L),o(u))};static \u0275cmp=p({type:r,selectors:[["app-payment-table"]],standalone:!0,features:[h,s],decls:4,vars:9,consts:[["icon","bi bi-plus-lg","iconPosition","left","className","btn btn-success",3,"clicked","label"],[3,"delete","columns","data","showActions"],[3,"pageChange","totalItems","pageSize","currentPage"]],template:function(t,n){t&1&&(i(0,"app-icon-button",0),c(1,"translate"),l("clicked",function(){return n.openPaymentModal()}),a(),i(2,"app-data-table",1),l("delete",function(C){return n.openDeleteModal(C)}),a(),i(3,"app-paginator",2),l("pageChange",function(C){return n.onPageChange(C)}),a()),t&2&&(I("label",d(1,7,"BUTTONS.ADD-NEW")),m(2),T("columns",n.columns)("data",n.paginated)("showActions",!0),m(),T("totalItems",n.payments().length)("pageSize",n.pageSize)("currentPage",n.currentPage))},dependencies:[f,U,g,y,j,F],styles:[".payment-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.payment-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .payment-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem 1rem;text-align:left}.payment-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0}"]})};var z=class r{constructor(b){this.translateService=b}static \u0275fac=function(e){return new(e||r)(o(u))};static \u0275cmp=p({type:r,selectors:[["app-payments-page"]],standalone:!0,features:[s],decls:5,vars:3,template:function(e,t){e&1&&(i(0,"app-base-page")(1,"h2"),A(2),c(3,"translate"),a(),_(4,"app-payment-table"),a()),e&2&&(m(2),D(d(3,1,"PAGES-TITLE.PAYMENT")))},dependencies:[f,E,N,P,g,y],encapsulation:2})};export{z as PaymentsPage};
