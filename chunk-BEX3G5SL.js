import{a as U,b as k,c as w,d as F,e as R,f as j,g as z,h as G,i as q}from"./chunk-57TYY7GN.js";import{c as L,d as B}from"./chunk-PAIEFO4T.js";import{$ as D,Da as d,E as l,Ea as c,W as p,Wa as u,X as o,bb as P,db as f,ea as v,eb as g,fb as T,ha as a,i as y,ia as n,ja as E,na as s,ra as _,va as A,wa as N,za as m}from"./chunk-UVVLSM63.js";import{a as M,b as h,d as I}from"./chunk-QEZ3K4DX.js";var S=class i extends z{constructor(e,t,r){super();this.api=e;this.modalService=t;this.translateService=r;this.orders=this.api.orders}orders;columns=[{key:"id",label:"TABLE-COLUMNS.ID"},{key:"product",label:"TABLE-COLUMNS.PRODUCT"},{key:"quantity",label:"TABLE-COLUMNS.QUANTITY"},{key:"price",label:"TABLE-COLUMNS.PRICE",type:"currency"},{key:"date",label:"TABLE-COLUMNS.DATE",type:"date"},{key:"status",label:"TABLE-COLUMNS.STATUS"}];openDeleteModal(e){let t=this.modalService.open(F);t.componentInstance.title=this.translateService.instant("MODAL.TITLE"),t.componentInstance.message=this.translateService.instant("MODAL.MESSAGE",{id:e.id}),t.result.then(r=>{r&&this.api.deleteOrder(e.id)})}openOrderModal(){let e=this.modalService.open(R);e.componentInstance.title="New Order",e.componentInstance.type="order",e.componentInstance.onSubmit=t=>I(this,null,function*(){yield y(this.api.createOrder(h(M({},t),{date:new Date})))}),e.result.then(t=>{t&&this.api.fetchOrders()}).catch(()=>{})}getItems(){return this.orders()}static \u0275fac=function(t){return new(t||i)(o(B),o(k),o(f))};static \u0275cmp=l({type:i,selectors:[["app-order-table"]],standalone:!0,features:[D,m],decls:4,vars:9,consts:[["icon","bi bi-plus-lg","iconPosition","left","className","btn btn-success",3,"clicked","label"],[3,"delete","columns","data","showActions"],[3,"pageChange","totalItems","pageSize","currentPage"]],template:function(t,r){t&1&&(a(0,"app-icon-button",0),d(1,"translate"),s("clicked",function(){return r.openOrderModal()}),n(),a(2,"app-data-table",1),s("delete",function(C){return r.openDeleteModal(C)}),n(),a(3,"app-paginator",2),s("pageChange",function(C){return r.onPageChange(C)}),n()),t&2&&(_("label",c(1,7,"BUTTONS.ADD-NEW")),p(2),v("columns",r.columns)("data",r.paginated)("showActions",!0),p(),v("totalItems",r.orders().length)("pageSize",r.pageSize)("currentPage",r.currentPage))},dependencies:[u,w,U,j,T,g,q,G]})};var Q=class i{constructor(b){this.translateService=b}static \u0275fac=function(e){return new(e||i)(o(f))};static \u0275cmp=l({type:i,selectors:[["app-orders-page"]],standalone:!0,features:[m],decls:5,vars:3,template:function(e,t){e&1&&(a(0,"app-base-page")(1,"h2"),A(2),d(3,"translate"),n(),E(4,"app-order-table"),n()),e&2&&(p(2),N(c(3,1,"PAGES-TITLE.ORDER")))},dependencies:[u,P,L,S,T,g],encapsulation:2})};export{Q as OrdersPage};
